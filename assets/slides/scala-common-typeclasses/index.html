<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

    <title></title>
    <link rel="stylesheet" href="dist/reveal.css" />
    <link rel="stylesheet" href="dist/theme/serif.css" id="theme" />
    <link rel="stylesheet" href="plugin/highlight/monokai.css" />
	<link rel="stylesheet" href="css/layout.css" />
	<link rel="stylesheet" href="plugin/customcontrols/style.css">

	<link rel="stylesheet" href="plugin/reveal-pointer/pointer.css" />


    <script defer src="dist/fontawesome/all.min.js"></script>

	<script type="text/javascript">
		var forgetPop = true;
		function onPopState(event) {
			if(forgetPop){
				forgetPop = false;
			} else {
				parent.postMessage(event.target.location.href, "app://obsidian.md");
			}
        }
		window.onpopstate = onPopState;
		window.onmessage = event => {
			if(event.data == "reload"){
				window.document.location.reload();
			}
			forgetPop = true;
		}

		function fitElements(){
			const itemsToFit = document.getElementsByClassName('fitText');
			for (const item in itemsToFit) {
				if (Object.hasOwnProperty.call(itemsToFit, item)) {
					var element = itemsToFit[item];
					fitElement(element,1, 1000);
					element.classList.remove('fitText');
				}
			}
		}

		function fitElement(element, start, end){

			let size = (end + start) / 2;
			element.style.fontSize = `${size}px`;

			if(Math.abs(start - end) < 1){
				while(element.scrollHeight > element.offsetHeight){
					size--;
					element.style.fontSize = `${size}px`;
				}
				return;
			}

			if(element.scrollHeight > element.offsetHeight){
				fitElement(element, start, size);
			} else {
				fitElement(element, size, end);
			}		
		}


		document.onreadystatechange = () => {
			fitElements();
			if (document.readyState === 'complete') {
				if (window.location.href.indexOf("?export") != -1){
					parent.postMessage(event.target.location.href, "app://obsidian.md");
				}
				if (window.location.href.indexOf("print-pdf") != -1){
					let stateCheck = setInterval(() => {
						clearInterval(stateCheck);
						window.print();
					}, 250);
				}
			}
	};


        </script>
  </head>
  <body>
    <div class="reveal">
      <div class="slides"><section  data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 980.0000000000001px; width: 1520px; min-height: 980.0000000000001px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

### Классические тайпклассы используемые в ФП

<img src="AREAS/Work/ФИЛП/2024/ФИЛП. Лекция 6 - Foldable, Functor, Applicative/memes/meme4.jpg" alt="" style="width: 700px; object-fit: fill">
</div></script></section><section  data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 980.0000000000001px; width: 1520px; min-height: 980.0000000000001px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

<img src="RESOURCES/Фотографии/ainr-avatar.png" alt="" style="width: 300px; object-fit: fill">


**Хакимов Айнур**

- Scala разработчик в Tinkoff
- До Tinkoff писал на С/С++
</div></script></section><section  data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 980.0000000000001px; width: 1520px; min-height: 980.0000000000001px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

## План курса ФИЛП 2024

<img src="AREAS/Work/ФИЛП/2024/ФИЛП. Лекция 6 - Foldable, Functor, Applicative/excalidraw/filp_plan6.png" alt="" style="width: 1400px; object-fit: fill">
</div>

<aside class="notes"><p>Сегодня у нас шестое занятие, больше половины курса позади. На прошлой лекции мы рассматривали такие механизмы языка как имплиситы и тайплассы. </p>
<p>На прошлой лекции мы рассматривали такие механизмы языка как имплиситы и тайплассы. Сегодня мы перейдем к рассмотрению базовых абстракций из функционального программирования, которые используются Scala разработчиками в повседневности.</p>
<p>Тема является базисом, который понадобится в будущих лекциях</p>
</aside></script></section><section  data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 980.0000000000001px; width: 1520px; min-height: 980.0000000000001px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

## План лекции

- &shy;<!-- .element: class="fragment" data-fragment-index="1" -->Рассмотрим классические примеры тайпклассов и их свойства
- &shy;<!-- .element: class="fragment" data-fragment-index="2" -->Увидим, как писать максимально обобщенный код на Scala
- &shy;<!-- .element: class="fragment" data-fragment-index="3" -->Познакомимся со Scala-библиотекой, которая содержит в себе классические тайпклассы
</div></script></section><section ><section data-markdown><script type="text/template"><!-- .slide: class="drop" data-auto-animate="true" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 980.0000000000001px; width: 1520px; min-height: 980.0000000000001px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

<div class="" style="position: absolute; left: 0%; top: 20%; height: 60%; width: 40%; display: flex; flex-direction: column; align-items: center; justify-content: center" >

```scala[]
1 + 2 + 3

"I" + "love" + "fp"

List(1, 2, 3) ++ List(4, 5, 6)
```
</div>
</div>

<aside class="notes"><p><code>Semigroup</code> - это тайпкласс, который представляет собой операцию, которая может комбинировать два объекта одного типа.</p>
</aside></script></section><section data-markdown><script type="text/template"><!-- .slide: class="drop" data-auto-animate="true" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 980.0000000000001px; width: 1520px; min-height: 980.0000000000001px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

<div class="" style="position: absolute; left: 40%; top: 20%; height: 60%; width: 60%; display: flex; flex-direction: column; align-items: center; justify-content: center" >

### `Semigroup`

```scala[]
trait Semigroup[A] {
	def combine(x: A, y: A): A
}
```
</div>

<div class="" style="position: absolute; left: 0%; top: 20%; height: 60%; width: 40%; display: flex; flex-direction: column; align-items: center; justify-content: center" >

```scala[]
1 + 2 + 3

"I" + "love" + "fp"

List(1, 2, 3) ++ List(4, 5, 6)
```
</div>
</div>

<aside class="notes"><p>Начнем с самых простых для понимания абстракций. Это так называемые Appendable Things, что относится к типам данных или структурам, которые могут быть объединены или &quot;добавлены&quot; друг к другу с помощью определённой операции.</p>
<p><code>Semigroup</code> - это тайпкласс, который представляет собой операцию, которая может комбинировать два объекта одного типа.</p>
</aside></script></section><section data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 980.0000000000001px; width: 1520px; min-height: 980.0000000000001px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

<img src="AREAS/Work/ФИЛП/2024/ФИЛП. Лекция 6 - Foldable, Functor, Applicative/memes/Pasted image 20240320133705.png" alt="" style="object-fit: scale-down">


Посмотрим на примеры кода с Semigroup
</div></script></section><section data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 980.0000000000001px; width: 1520px; min-height: 980.0000000000001px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

| Semigroup laws    |                                                 |
| -------------- | ----------------------------------------------- |
| Associativity  | ```(A \|+\| B) \|+\| C = A \|+\| (B \|+\| C)``` |
</div>

<aside class="notes"><p>Важнейшей особенностью <code>Semigroup</code> является ассоциативность. Это значит, что порядок, в котором происходит комбинирование, не важен. Например, операция <code>(A |+| B) |+| C</code>, будет давать тот же результат, что и <code>A |+| (B |+| C)</code>.</p>
<ul>
<li><code>Semigroup</code> полезен, когда вам нужно комбинировать или суммировать данные разных элементов. Он предоставляет формальный способ сделать это, который гарантирует соблюдение ассоциативности.</li>
<li>В программировании это особенно важно для работы с коллекциями данных, распределёнными системами и параллельными вычислениями, где порядок операций может меняться.</li>
</ul>
</aside></script></section><section data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 980.0000000000001px; width: 1520px; min-height: 980.0000000000001px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

<img src="AREAS/Work/ФИЛП/2024/ФИЛП. Лекция 6 - Foldable, Functor, Applicative/excalidraw/pages_with_monoid.png" alt="" style="width: 900px; object-fit: fill">
</div>

<aside class="notes"><p>Ассоциативность полугруппы находит практическое применение в том, что она позволяет разбивать задачи на меньшие подзадачи, которые могут быть выполнены независимо и, часто, параллельно. Это принципиально важно для увеличения эффективности вычислений в современных высокопроизводительных и распределенных системах.</p>
</aside></script></section><section data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 980.0000000000001px; width: 1520px; min-height: 980.0000000000001px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

```scala
def combineAll[A: Semigroup](list: List[A]): A = {
    ???
}
```
</div></script></section><section data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 980.0000000000001px; width: 1520px; min-height: 980.0000000000001px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

### `Monoid`

```scala[]
trait Monoid[A] extends Semigroup[A] {  
	def empty: A  
}
```
</div>

<aside class="notes"><p>Следующая абстракция, которую мы рассмотрим, это - Monoid!
Этот тайпкласс расширяет Semigroup</p>
<p><code>Monoid</code> расширяет <code>Semigroup</code>, добавляя понятие нейтрального элемента (<code>empty</code>). 
Моноид — это полугруппа с нейтральным элементом.
Этот элемент действует как &quot;нулевой&quot; или &quot;идентичный&quot; элемент для операции <code>combine</code>.</p>
<p>Практическая польза нейтрального элемента выражается в сценариях, когда, например, мы можем попытаться найти сумму значений в списке, который может быть пустым. В этом случае <code>Monoid[A].empty</code> будет служить разумным и безопасным значением по умолчанию.</p>
</aside></script></section><section data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 980.0000000000001px; width: 1520px; min-height: 980.0000000000001px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

<img src="AREAS/Work/ФИЛП/2024/ФИЛП. Лекция 6 - Foldable, Functor, Applicative/excalidraw/appendable_things.png" alt="" style="object-fit: scale-down">
</div>

<aside class="notes"></aside></script></section><section data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 980.0000000000001px; width: 1520px; min-height: 980.0000000000001px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

<img src="AREAS/Work/ФИЛП/2024/ФИЛП. Лекция 6 - Foldable, Functor, Applicative/memes/Pasted image 20240320135023.png" alt="" style="width: 300px; object-fit: fill">


Посмотрим на примеры кода с Monoid
</div></script></section><section data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 980.0000000000001px; width: 1520px; min-height: 980.0000000000001px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

| Monoid laws    |                                                 |
| -------------- | ----------------------------------------------- |
| Associativity  | ```(A \|+\| B) \|+\| C = A \|+\| (B \|+\| C)``` |
| Left identity  | ```Monoid[A].empty \|+\| x = x```               |
| Right identity | ```x \|+\| Monoid[A].empty = x```               |
</div>

<aside class="notes"><p>Cвойства identity гарантируют, что идентичный элемент действительно нейтрален и не вносит никаких изменений в другие элементы моноида при выполнении операции. Это обеспечивает предсказуемость в использовании моноидов для различных вычислительных задач, таких как свёртка коллекций, агрегация данных, функциональное составление и т.д.</p>
</aside></script></section><section data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 980.0000000000001px; width: 1520px; min-height: 980.0000000000001px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">
<!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 980.0000000000001px; width: 1520px; min-height: 980.0000000000001px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">
<!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 980.0000000000001px; width: 1520px; min-height: 980.0000000000001px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">
<!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 980.0000000000001px; width: 1520px; min-height: 980.0000000000001px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">
<!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 980.0000000000001px; width: 1520px; min-height: 980.0000000000001px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">
<!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 980.0000000000001px; width: 1520px; min-height: 980.0000000000001px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

Вопросы?
</div></div></div></div></div></div></script></section></section><section ><section data-markdown><script type="text/template"><!-- .slide: class="drop" data-auto-animate="true" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 980.0000000000001px; width: 1520px; min-height: 980.0000000000001px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

### `Functor`
</div></script></section><section data-markdown><script type="text/template"><!-- .slide: class="drop" data-auto-animate="true" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 980.0000000000001px; width: 1520px; min-height: 980.0000000000001px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

### `Functor`


```scala[]
Vector(1, 2, 3).map(_ + 1) // result: Vector(2, 3, 4)

List(1, 2, 3).map(_ + 1) // result: List(2, 3, 4)

Some(1).map(_ + 1) // result: Some(2)
```
</div>

<aside class="notes"><p>Следующий тайплкасс, который мы рассмотрим - это функтор (или Covariant Functor).</p>
<p>Функтор - это абстракция, которая позволяет описывать последовательные вычисления для значений, внутри некоторого контекста <code>F[_]</code>.</p>
</aside></script></section><section data-markdown><script type="text/template"><!-- .slide: class="drop" data-auto-animate="true" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 980.0000000000001px; width: 1520px; min-height: 980.0000000000001px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

### `Functor`

```scala[|1]
trait Functor[F[_]] {  
	def map[A, B](fa: F[A])(f: A => B): F[B]  
}
```


```scala[]
Vector(1, 2, 3).map(_ + 1) // result: Vector(2, 3, 4)

List(1, 2, 3).map(_ + 1) // result: List(2, 3, 4)

Some(1).map(_ + 1) // result: Some(2)
```
</div></script></section><section data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 980.0000000000001px; width: 1520px; min-height: 980.0000000000001px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

Что такое `F[_]`?

## 🤔
</div>

<aside class="notes"><p>Давайте поподробнее остановимся на <code>F[_]</code> - что оно означает?</p>
</aside></script></section><section data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 980.0000000000001px; width: 1520px; min-height: 980.0000000000001px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

#### Higher-Kinded Types

<img src="AREAS/Work/ФИЛП/2024/ФИЛП. Лекция 6 - Foldable, Functor, Applicative/excalidraw/f_hole_start.png" alt="" style="width: 800px; object-fit: fill">
</div>

<aside class="notes"><p>Вы уже знакомы с такими типами как <code>Seq</code>, <code>List</code>, <code>Option</code> (их гораздо больше), которые могут содержать в себе некоторые значения. Так вот в Scala концепция <code>F[_]</code> используется для обозначения типов высших порядков (Higher-Kinded Types, HKT).</p>
<p>Типы высших порядков — это типы, которые содержат другие типы в качестве параметров.</p>
</aside></script></section><section data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 980.0000000000001px; width: 1520px; min-height: 980.0000000000001px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

#### Higher-Kinded Types

<img src="AREAS/Work/ФИЛП/2024/ФИЛП. Лекция 6 - Foldable, Functor, Applicative/excalidraw/f_hole.png" alt="" style="width: 800px; object-fit: fill">
</div>

<aside class="notes"><p>Использование <code>F[_]</code> позволяет делать абстракции, не привязываясь к конкретной реализации.</p>
</aside></script></section><section data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 980.0000000000001px; width: 1520px; min-height: 980.0000000000001px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

#### Higher-Kinded Types

<img src="AREAS/Work/ФИЛП/2024/ФИЛП. Лекция 6 - Foldable, Functor, Applicative/excalidraw/f_hole 1.png" alt="" style="width: 800px; object-fit: fill">
</div>

<aside class="notes"><p><code>F[_]</code> еще обычно называют F с дыркой.</p>
</aside></script></section><section data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 980.0000000000001px; width: 1520px; min-height: 980.0000000000001px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

### `Functor`

```scala[]
trait Functor[F[_]] {  
	def map[A, B](fa: F[A])(f: A => B): F[B]  
}
```

_Вернемся к функтору_
</div>

<aside class="notes"><p>Основная идея <code>Functor</code> заключается в возможности применения функции к значениям, находящимся в некотором контексте (например, в контейнере или эффекте), без необходимости извлекать эти значения из их контекста.</p>
</aside></script></section><section data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 980.0000000000001px; width: 1520px; min-height: 980.0000000000001px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

| Functor | Method | From       | Given    | To         |
| ------- | ------ | ---------- | -------- | ---------- |
|         | `map`  | **`F[A]`** | `A => B` | **`F[B]`** |
</div>

<aside class="notes"><p>Основная операция в <code>Functor</code> — это <code>map</code>, которая принимает функцию <code>f: A =&gt; B</code> и применяет её к значению типа <code>A</code>, находящемуся в контексте <code>F[A]</code>, результатом чего является значение типа <code>B</code> в том же контексте <code>F[B]</code>. Это позволяет трансформировать данные в контейнерах или других контекстах, не заботясь о деталях реализации этих контекстов.</p>
</aside></script></section><section data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 980.0000000000001px; width: 1520px; min-height: 980.0000000000001px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

<img src="AREAS/Work/ФИЛП/2024/ФИЛП. Лекция 6 - Foldable, Functor, Applicative/memes/Pasted image 20240320135023.png" alt="" style="width: 300px; object-fit: fill">


Посмотрим на примеры кода с Functor
</div></script></section><section data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 980.0000000000001px; width: 1520px; min-height: 980.0000000000001px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

| Functor laws |                                       |
| ------------ | ------------------------------------- |
| Identity     | `fa.map(a => a) == fa`                |
|              | `fa.map(identity) == fa`              |
| Composition  | `fa.map(g(f(_))) == fa.map(f).map(g)` |
</div>

<aside class="notes"><p>Identity - Применение функции <code>identity</code> (т.е., функции, которая возвращает свой аргумент без изменений) через <code>map</code> к контексту не должно изменять этот контекст.</p>
<p>Composition - Применение двух функций последовательно через два последовательных вызова <code>map</code> должно быть эквивалентно одному вызову <code>map</code> с композицией этих двух функций.</p>
<p>Свойство композиции позволяет разрабатывать модульный и выразительный код. Вы можете создавать мелкие, независимые функции и комбинировать их в более сложные операции. Это облегчает тестирование, поскольку каждую функцию можно тестировать отдельно, а затем компоновать с гарантией, что их композиция будет работать корректно.</p>
</aside></script></section><section data-markdown><script type="text/template">
Вопросы?
</script></section></section><section ><section data-markdown><script type="text/template"><!-- .slide: class="drop" data-auto-animate="true" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 980.0000000000001px; width: 1520px; min-height: 980.0000000000001px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

### `Foldable`


```scala[]
Vector(1, 2, 3).foldLeft(0)(_ + _)

List(1, 2, 3).foldLeft(0)(_ + _)

Some(1).foldLeft(0)(_ + _)
```
</div></script></section><section data-markdown><script type="text/template"><!-- .slide: class="drop" data-auto-animate="true" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 980.0000000000001px; width: 1520px; min-height: 980.0000000000001px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

### `Foldable`

```scala[]
trait Foldable[F[_]] {  
	def foldLeft[A, B](fa: F[A], b: B)(f: (B, A) => B): B  
}
```

```scala[]
Vector(1, 2, 3).foldLeft(0)(_ + _)

List(1, 2, 3).foldLeft(0)(_ + _)

Some(1).foldLeft(0)(_ + _)
```
</div>

<aside class="notes"><p><code>Foldable</code> — это тайпкласс или абстракция над операцией &quot;свёртки&quot; коллекций и других структур данных к одному значению.</p>
</aside></script></section><section data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 980.0000000000001px; width: 1520px; min-height: 980.0000000000001px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

### `Foldable`

<img src="AREAS/Work/ФИЛП/2024/ФИЛП. Лекция 6 - Foldable, Functor, Applicative/excalidraw/foldLeft.png" alt="" style="width: 1000px; object-fit: fill">
</div>

<aside class="notes"><p>Свёртка — это процесс итерации по элементам структуры данных с целью сокращения их к единственному суммарному значению, часто используя некоторую комбинирующую операцию, такую как сложение, умножение или логическое &quot;И&quot;/&quot;ИЛИ&quot;.</p>
</aside></script></section><section data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 980.0000000000001px; width: 1520px; min-height: 980.0000000000001px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

<img src="AREAS/Work/ФИЛП/2024/ФИЛП. Лекция 6 - Foldable, Functor, Applicative/memes/Pasted image 20240320133822.png" alt="" style="width: 400px; object-fit: fill">


Посмотрим на примеры кода с Foldable
</div></script></section><section data-markdown><script type="text/template">
Вопросы?
</script></section></section><section ><section data-markdown><script type="text/template"><!-- .slide: class="drop" data-auto-animate="true" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 980.0000000000001px; width: 1520px; min-height: 980.0000000000001px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

### `Applicative`
</div></script></section><section data-markdown><script type="text/template"><!-- .slide: class="drop" data-auto-animate="true" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 980.0000000000001px; width: 1520px; min-height: 980.0000000000001px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

### `Applicative`

(сейчас начнется сложная часть лекции!)
</div>

<aside class="notes"><p>Дисклеймер: сейчас начнется сложная часть лекции!</p>
</aside></script></section><section data-markdown><script type="text/template"><!-- .slide: class="drop" data-auto-animate="true" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 980.0000000000001px; width: 1520px; min-height: 980.0000000000001px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

### `Applicative`

```scala[]
// Аппликативный функтор
trait Applicative[F[_]] extends Functor[F] {  
  def pure[A](a: A): F[A]
  def product[A, B](fa: F[A], fb: F[B]): F[(A, B)]  
}
```
</div></script></section><section data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 980.0000000000001px; width: 1520px; min-height: 980.0000000000001px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

### Аппликативный функтор

<img src="AREAS/Work/ФИЛП/2024/ФИЛП. Лекция 6 - Foldable, Functor, Applicative/excalidraw/monad_typeclass_hierarchy.png" alt="" style="width: 300px; object-fit: fill">
</div></script></section><section data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 980.0000000000001px; width: 1520px; min-height: 980.0000000000001px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

Зачем нужен pure?

<img src="AREAS/Work/ФИЛП/2024/ФИЛП. Лекция 6 - Foldable, Functor, Applicative/excalidraw/applicaive.png" alt="" style="width: 1000px; object-fit: fill">
</div>

<aside class="notes"><p>Мы научились делать вычисления над значениями которые лежат в некотором контексте <code>F[_]</code>. Но, есть один вопрос - как засовывать значения в этот самый контекст?</p>
<p>У всех типов <code>List</code>, <code>Option</code>, <code>Either</code> (и другие) есть различные способы для оборачивания значений в их контекст.</p>
<p>Хотелось бы иметь абстракцию, которая умеет помещать значение в контекст.</p>
</aside></script></section><section data-markdown><script type="text/template"><!-- .slide: class="drop" data-auto-animate="true" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 980.0000000000001px; width: 1520px; min-height: 980.0000000000001px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

Зачем нужен pure?

<img src="AREAS/Work/ФИЛП/2024/ФИЛП. Лекция 6 - Foldable, Functor, Applicative/excalidraw/applicaive 1.png" alt="" style="width: 1000px; object-fit: fill">
</div>

<aside class="notes"><p>И этой абстракцией как раз таки является Applicative.</p>
</aside></script></section><section data-markdown><script type="text/template"><!-- .slide: class="drop" data-auto-animate="true" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 980.0000000000001px; width: 1520px; min-height: 980.0000000000001px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

Зачем нужен pure?

<img src="AREAS/Work/ФИЛП/2024/ФИЛП. Лекция 6 - Foldable, Functor, Applicative/excalidraw/applicaive 1.png" alt="" style="width: 1000px; object-fit: fill">


```scala
Applicative[Option].pure(42)  // Some(42)
Applicative[List].pure(42)    // List(42)
```
</div></script></section><section data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 980.0000000000001px; width: 1520px; min-height: 980.0000000000001px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

<img src="AREAS/Work/ФИЛП/2024/ФИЛП. Лекция 6 - Foldable, Functor, Applicative/memes/Pasted image 20240320133822.png" alt="" style="object-fit: scale-down">


Посмотрим на примеры кода с Applicative.pure
</div></script></section><section data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 980.0000000000001px; width: 1520px; min-height: 980.0000000000001px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

### `Applicative`

```scala[]
trait Applicative[F[_]] extends Functor[F] {  
  def pure[A](a: A): F[A]
  def product[A, B](fa: F[A], fb: F[B]): F[(A, B)]  
}
```
</div>

<aside class="notes"><p><code>Applicative</code> — это тайпкласс, который расширяет <code>Functor</code> путём добавления операции <code>pure</code>, <code>product</code>.</p>
<p>Операция <code>pure</code> принимает значение и помещает его в контекст <code>F[_]</code>. Это позволяет начать работу с &quot;чистыми&quot; значениями в контексте <code>F[_]</code>, что является основой для дальнейших операций применения функций в этом контексте.</p>
</aside></script></section><section data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 980.0000000000001px; width: 1520px; min-height: 980.0000000000001px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

| Applicative | Method    | From           | Given | To          |
| ----------- | --------- | -------------- | ----- | ----------- |
|             | `pure`    | `A`            |       | `F[A]`      |
|             | `product` | `(F[A], F[B])` |       | `F[(A, B)]` |
</div>

<aside class="notes"><p><code>Applicative.product</code> берет два контекста и комбинирует их значения в пару. Например, если у вас есть <code>F[Int]</code> и <code>F[String]</code>, то <code>product</code> сделает <code>F[(Int, String)]</code>. При этом он не применяет никаких функций для значений этих контекстов.</p>
</aside></script></section><section data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 980.0000000000001px; width: 1520px; min-height: 980.0000000000001px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

#### Независимые вычисления

<img src="AREAS/Work/ФИЛП/2024/ФИЛП. Лекция 7 - Monad/excalidraw/what is monad 1.png" alt="" style="width: 1000px; object-fit: fill">
</div></script></section><section data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 980.0000000000001px; width: 1520px; min-height: 980.0000000000001px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

<img src="AREAS/Work/ФИЛП/2024/ФИЛП. Лекция 6 - Foldable, Functor, Applicative/memes/Pasted image 20240320133822.png" alt="" style="object-fit: scale-down">


Посмотрим на примеры кода с Applicative.product
</div></script></section><section data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 980.0000000000001px; width: 1520px; min-height: 980.0000000000001px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

#### Независимые вычисления

<img src="AREAS/Work/ФИЛП/2024/ФИЛП. Лекция 7 - Monad/excalidraw/what is monad 1 1.png" alt="" style="width: 1000px; object-fit: fill">
</div></script></section><section data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 980.0000000000001px; width: 1520px; min-height: 980.0000000000001px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

<img src="AREAS/Work/ФИЛП/2024/ФИЛП. Лекция 6 - Foldable, Functor, Applicative/memes/Pasted image 20240320133822.png" alt="" style="object-fit: scale-down">


Посмотрим на примеры кода с Applicative.mapN
</div></script></section><section data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 980.0000000000001px; width: 1520px; min-height: 980.0000000000001px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

### Applicative laws

|                      _Associativity_                      |
|:---------------------------------------------------------:|
| `fa.product(fb).product(fc) ~ fa.product(fb.product(fc))` |

|      _Right identity_      |
|:--------------------------:|
| `fa.product(().pure) ~ fa` |

|      _Left identity_       |
|:--------------------------:|
| `().pure.product(fa) ~ fa` |
</div>

<aside class="notes"><p>В контексте аппликативных функторов и их законов, термин &quot;изоморфность&quot; относится к идее о том, что две структуры данных или типы являются &quot;формально эквивалентными&quot; в том смысле, что между ними можно установить взаимно однозначное соответствие. Это означает, что вы можете преобразовать одну структуру в другую и обратно, не потеряв никакой информации.</p>
<p>В контексте законов аппликативов:</p>
<ul>
<li><p><strong>Ассоциативность</strong> подразумевает, что независимо от порядка, в котором вы комбинируете аппликативные эффекты, результат можно переформатировать (перегруппировать) так, чтобы он был эквивалентен любому другому порядку комбинации этих эффектов. Изоморфизм здесь указывает на то, что структура результата сохраняется одинаковой независимо от порядка группировки операций.</p>
</li>
<li><p><strong>Левая и правая идентичность</strong> говорят о том, что комбинирование эффекта с &quot;чистым&quot; эффектом (который не вносит изменений, а просто оборачивает значение) с одной из сторон дает результат, который эквивалентен исходному эффекту. Изоморфность в этом случае означает, что добавление или изъятие такого &quot;чистого&quot; эффекта не изменяет существенной структуры или значения исходного эффекта.</p>
</li>
</ul>
<p>Для примера, если у вас есть два выражения или два типа данных, которые вы можете преобразовать друг в друга без потери данных, эти две формы считаются изоморфными. В математике и компьютерных науках, изоморфизмы часто используются для демонстрации того, что различные представления проблемы или структуры данных на самом деле эквивалентны с точки зрения их информационного содержания или способности выполнять одинаковые операции.</p>
</aside></script></section><section data-markdown><script type="text/template">
Вопросы?
</script></section></section><section ><section data-markdown><script type="text/template"><!-- .slide: class="drop" data-auto-animate="true" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 980.0000000000001px; width: 1520px; min-height: 980.0000000000001px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

### `Traverse`
</div></script></section><section data-markdown><script type="text/template"><!-- .slide: class="drop" data-auto-animate="true" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 980.0000000000001px; width: 1520px; min-height: 980.0000000000001px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

### `Traverse` 

```scala[]
trait Traverse[F[_]] {  
	def traverse[G[_]: Applicative, A, B](fa: F[A])(f: A => G[B]): G[F[B]]  
}
```
</div>

<aside class="notes"><p><code>Traverse</code> — это тайпкласс в функциональном программировании, который обобщает паттерн обхода структуры данных и применения к каждому элементу функции, результатом которой является значение в некотором контексте (например, <code>Option</code>, <code>Either</code>, <code>Future</code> и т.д.), с последующим &quot;собиранием&quot; этих результатов обратно в исходную структуру данных, но уже с новыми значениями внутри.</p>
</aside></script></section><section data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 980.0000000000001px; width: 1520px; min-height: 980.0000000000001px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

| Traverse | Method     | From      | Given       | To        |
| -------- | ---------- | --------- | ----------- | --------- |
|          | `traverse` | `F[A]`    | `A => G[B]` | `G[F[A]]` |
</div>

<aside class="notes"><p><code>traverse</code> принимает структуру данных <code>F[A]</code> и функцию <code>f: A =&gt; G[B]</code>, где <code>G[_]</code> — это некоторый аппликативный функтор. Задача <code>traverse</code> — применить <code>f</code> к каждому элементу <code>A</code> в структуре <code>F</code>, а затем собрать результаты обратно в <code>F[B]</code>, сохраняя при этом эффекты и структуру контекста <code>G</code>.</p>
<p>Сложно звучит, но на примерах будет понятно</p>
<p>Метод <code>sequence</code> является частью тайпкласса <code>Traverse</code> и позволяет &quot;инвертировать&quot; структуру, содержащую контекстуализированные значения, например, из <code>List[Option[A]]</code> в <code>Option[List[A]]</code>. Это удобно, когда вам нужно выполнить множество операций, каждая из которых может вернуть значение в контексте, и вы хотите собрать результаты в один контекст, содержащий коллекцию результатов.</p>
<p>Удобен при работе с вложенными структурами
<code>Traverse</code> можно использовать для выполнения асинхронных операций над элементами коллекции и сбора результатов обратно в коллекцию.</p>
</aside></script></section><section data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 980.0000000000001px; width: 1520px; min-height: 980.0000000000001px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

<img src="AREAS/Work/ФИЛП/2024/ФИЛП. Лекция 6 - Foldable, Functor, Applicative/memes/Pasted image 20240320134007.png" alt="" style="object-fit: scale-down">


Посмотрим на примеры кода с Traverse
</div></script></section><section data-markdown><script type="text/template">
Вопросы?
</script></section></section><section ><section data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 980.0000000000001px; width: 1520px; min-height: 980.0000000000001px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

### `ApplicativeError`
</div>

<aside class="notes"><p>Мы научились строить цепочки вычислений, но есть один момент который мы пока не учли - что делать если в процессе вычислений произойдет ошибка?</p>
</aside></script></section><section data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 980.0000000000001px; width: 1520px; min-height: 980.0000000000001px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

### `ApplicativeError`

```scala[]
trait ApplicativeError[F[_], E] extends Applicative[F] {  

    def raiseError[A](e: E): F[A]
    
    def handleErrorWith[A](fa: F[A])(f: E => F[A]): F[A]  
}
```
</div>

<aside class="notes"><p><code>ApplicativeError</code> — это расширение абстракции <code>Applicative</code>, предоставляющее возможности для обработки ошибок. <code>ApplicativeError</code> добавляет механизмы для представления и обработки потенциальных ошибок в этих контекстах.</p>
<ul>
<li><code>raiseError[A](e: E): F[A]</code> — создаёт значение в контексте <code>F[A]</code>, представляющее ошибку типа <code>E</code>. Это позволяет возвращать ошибки в том же контексте, что и обычные значения.</li>
<li><code>handleErrorWith[A](fa: F[A])(f: E =&gt; F[A]): F[A]</code> — позволяют обрабатывать ошибки, предоставляя функцию для их преобразования в новый контекст <code>F[A]</code>.</li>
</ul>
</aside></script></section><section data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 980.0000000000001px; width: 1520px; min-height: 980.0000000000001px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

<img src="AREAS/Work/ФИЛП/2024/ФИЛП. Лекция 6 - Foldable, Functor, Applicative/memes/Pasted image 20240320134007.png" alt="" style="object-fit: scale-down">


Посмотрим на примеры кода с ApplicativeError
</div></script></section><section data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 980.0000000000001px; width: 1520px; min-height: 980.0000000000001px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

<img src="AREAS/Work/ФИЛП/2024/ФИЛП. Лекция 6 - Foldable, Functor, Applicative/excalidraw/validation.png" alt="" style="object-fit: scale-down">
</div></script></section><section data-markdown><script type="text/template">
Вопросы?
</script></section></section><section  data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 980.0000000000001px; width: 1520px; min-height: 980.0000000000001px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

## Laws, laws, laws

<img src="AREAS/Work/ФИЛП/2024/ФИЛП. Лекция 6 - Foldable, Functor, Applicative/memes/meme5.png" alt="" style="width: 700px; object-fit: fill">
</div>

<aside class="notes"><p>Свойства (или законы) абстракций, которые мы сегодня рассматривали, очень важны, поскольку, они удобны если им следуют все. Как и в случае с дорожными правилами, которые предписывают ездить по одной стороне дороги в пределах определённой территории.</p>
<p>Мы пишем код, используя абстракции и делаем предположения, что они должны удовлетворять своим свойствам (или законам), чтобы наш конечный код работал правильно.</p>
<p>Поэтому при использовании той, или иной абстракции стоит понимать какими свойствами (законами) оно обладает.</p>
</aside></script></section><section  data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 980.0000000000001px; width: 1520px; min-height: 980.0000000000001px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

## Scala with Cats

<img src="https://typelevel.org/cats/img/cats2.png" alt="" style="width: 300px; object-fit: fill">


> Cats (categories) is a library which provides abstractions for functional programming in the [Scala programming language](https://scala-lang.org/)

- https://typelevel.org/cats/
- https://www.scalawithcats.com/
- https://eed3si9n.com/herding-cats/
</div></script></section><section  data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 980.0000000000001px; width: 1520px; min-height: 980.0000000000001px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

## Спасибо за внимание!
</div></script></section></div>
    </div>

    <script src="dist/reveal.js"></script>

    <script src="plugin/markdown/markdown.js"></script>
    <script src="plugin/highlight/highlight.js"></script>
    <script src="plugin/zoom/zoom.js"></script>
    <script src="plugin/notes/notes.js"></script>
    <script src="plugin/math/math.js"></script>
	<script src="plugin/mermaid/mermaid.js"></script>
	<script src="plugin/chart/chart.min.js"></script>
	<script src="plugin/chart/plugin.js"></script>
	<script src="plugin/menu/menu.js"></script>
	<script src="plugin/customcontrols/plugin.js"></script>
	<script src="plugin/reveal-pointer/pointer.js"></script>
	<script src="plugin/elapsed-time-bar/elapsed-time-bar.js"></script>

    <script>
      function extend() {
        var target = {};
        for (var i = 0; i < arguments.length; i++) {
          var source = arguments[i];
          for (var key in source) {
            if (source.hasOwnProperty(key)) {
              target[key] = source[key];
            }
          }
        }
        return target;
      }

	  function isLight(color) {
		let hex = color.replace('#', '');

		// convert #fff => #ffffff
		if(hex.length == 3){
			hex = `${hex[0]}${hex[0]}${hex[1]}${hex[1]}${hex[2]}${hex[2]}`;
		}

		const c_r = parseInt(hex.substr(0, 2), 16);
		const c_g = parseInt(hex.substr(2, 2), 16);
		const c_b = parseInt(hex.substr(4, 2), 16);
		const brightness = ((c_r * 299) + (c_g * 587) + (c_b * 114)) / 1000;
		return brightness > 155;
	}

	var bgColor = getComputedStyle(document.documentElement).getPropertyValue('--r-background-color').trim();
	var isLight = isLight(bgColor);

	if(isLight){
		document.body.classList.add('has-light-background');
	} else {
		document.body.classList.add('has-dark-background');
	}

      // default options to init reveal.js
      var defaultOptions = {
        controls: true,
        progress: true,
        history: true,
        center: true,
        transition: 'default', // none/fade/slide/convex/concave/zoom
        plugins: [
          RevealMarkdown,
          RevealHighlight,
          RevealZoom,
          RevealNotes,
          RevealMath.MathJax3,
		  RevealMermaid,
		  RevealChart,
		  RevealCustomControls,
		  RevealMenu,
	      RevealPointer,
		  ElapsedTimeBar
        ],


    	allottedTime: 120 * 1000,

		mathjax3: {
			mathjax: 'plugin/math/mathjax/tex-mml-chtml.js',
		},
		markdown: {
		  gfm: true,
		  mangle: true,
		  pedantic: false,
		  smartLists: false,
		  smartypants: false,
		},

		mermaid: {
			theme: isLight ? 'default' : 'dark',
		},

		customcontrols: {
			controls: [
			]
		},
		menu: {
			loadIcons: false
		}
      };

      // options from URL query string
      var queryOptions = Reveal().getQueryHash() || {};

      var options = extend(defaultOptions, {"width":1520,"height":980,"margin":0.04,"controls":true,"progress":true,"slideNumber":true,"showNotes":false,"transition":"slide","transitionSpeed":"normal"}, queryOptions);
    </script>

    <script>
      Reveal.initialize(options);
    </script>
  </body>

  <!-- created with Advanced Slides -->
</html>
